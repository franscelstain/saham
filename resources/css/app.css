@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------------------------------------------------------- */
/* App-level polish (Tailwind v3 + daisyUI)                                   */
/* Goal: remove "pucat" look by using deeper surfaces, better contrast, and   */
/* consistent shadows/rings in the chosen theme.                               */
/* -------------------------------------------------------------------------- */

@layer base {
  html, body {
    height: 100%;
  }

  /* nicer selection on dark surfaces */
  ::selection {
    background: color-mix(in oklab, hsl(var(--p)) 30%, transparent);
  }
}

@layer components {
  /* Unified "surface" look for cards/panels (works with daisyUI colors). */
  .ui-surface {
    @apply bg-base-100/90 backdrop-blur border border-base-300/70 rounded-2xl shadow-md;
  }
  .ui-surface:hover {
    @apply border-base-300/90 shadow-lg;
  }

  /* Subtle elevated header strip */
  .ui-header {
    @apply bg-gradient-to-r from-sky-600 to-blue-700 text-white border-b border-sky-700/30;
  }

  /* KPI card treatment */
  .kpi-card {
    @apply ui-surface transition-transform duration-150;
  }
  .kpi-card:hover {
    @apply -translate-y-0.5 shadow-lg;
  }
  /* KPI color cues (light theme) */
  .kpi-card[data-kpi="BUY"]    { @apply border-emerald-400/70 bg-emerald-200/70; }
  .kpi-card[data-kpi="WAIT"]   { @apply border-sky-400/70     bg-sky-200/70; }
  .kpi-card[data-kpi="SKIP"]   { @apply border-amber-400/70   bg-amber-200/70; }
  .kpi-card[data-kpi="STALE"]  { @apply border-rose-400/70    bg-rose-200/70; }
  .kpi-card[data-kpi="ALL"]    { @apply border-indigo-400/70  bg-indigo-200/60; }

  .kpi-card[data-kpi] .kpi-ico { @apply ring-1; }

  .kpi-card[data-kpi="BUY"]   .kpi-ico { @apply ring-emerald-300/70 bg-emerald-100/70 text-emerald-700; }
  .kpi-card[data-kpi="WAIT"]  .kpi-ico { @apply ring-sky-300/70     bg-sky-100/70     text-sky-700; }
  .kpi-card[data-kpi="SKIP"]  .kpi-ico { @apply ring-amber-300/70   bg-amber-100/70   text-amber-700; }
  .kpi-card[data-kpi="STALE"] .kpi-ico { @apply ring-rose-300/70    bg-rose-100/70    text-rose-700; }
  .kpi-card[data-kpi="ALL"]   .kpi-ico { @apply ring-indigo-300/70  bg-indigo-100/70  text-indigo-700; }
  .kpi-top {
    @apply flex items-start justify-between gap-3;
  }
  .kpi-ico {
    @apply w-9 h-9 rounded-2xl grid place-items-center;
    background: color-mix(in oklab, hsl(var(--p)) 18%, hsl(var(--b1)));
    border: 1px solid color-mix(in oklab, hsl(var(--p)) 22%, transparent);
  }

  /* CTA button pop on dark theme */
  .btn-cta {
    @apply shadow-sm;
  }
}

/* -------------------------------------------------------------------------- */
/* Tabulator (keep minimal, theme-aware; avoid hard-coded whites)             */
/* -------------------------------------------------------------------------- */

.tabulator {
  border: 0 !important;
  background: transparent !important;
  font-size: 14px;
}

/* Header */
.tabulator .tabulator-header {
  background: color-mix(in oklab, hsl(var(--b2)) 75%, hsl(var(--b1))) !important;
  border: 1px solid color-mix(in oklab, hsl(var(--bc)) 12%, transparent) !important;
  border-bottom: 0 !important;
  border-radius: 14px 14px 0 0;
  overflow: hidden;
}
.tabulator .tabulator-header .tabulator-col {
  background: transparent !important;
  border-right: 1px solid color-mix(in oklab, hsl(var(--bc)) 10%, transparent) !important;
  font-weight: 650;
  color: color-mix(in oklab, hsl(var(--bc)) 78%, transparent);
}
.tabulator .tabulator-header .tabulator-col .tabulator-col-content {
  padding: 10px 10px !important;
}

/* Body */
.tabulator .tabulator-tableholder {
  border: 1px solid color-mix(in oklab, hsl(var(--bc)) 12%, transparent) !important;
  border-top: 0 !important;
  border-radius: 0 0 14px 14px;
  background: color-mix(in oklab, hsl(var(--b1)) 92%, transparent) !important;
}
.tabulator .tabulator-row {
  background: transparent !important;
  cursor: pointer;
}
.tabulator .tabulator-row .tabulator-cell {
  border-right: 1px solid color-mix(in oklab, hsl(var(--bc)) 7%, transparent) !important;
  border-bottom: 1px solid color-mix(in oklab, hsl(var(--bc)) 7%, transparent) !important;
  padding: 10px 10px !important;
  color: color-mix(in oklab, hsl(var(--bc)) 88%, transparent);
}
.tabulator .tabulator-row:nth-child(2n) {
  background: color-mix(in oklab, hsl(var(--b2)) 22%, transparent) !important;
}
.tabulator .tabulator-row.tabulator-selected {
  background: color-mix(in oklab, hsl(var(--p)) 16%, transparent) !important;
}
.tabulator .tabulator-row:hover {
  background: color-mix(in oklab, hsl(var(--b2)) 32%, transparent) !important;
}

/* Zebra striping Tabulator: apply to CELLS, not ROWS */
.tabulator .tabulator-row.tabulator-row-odd .tabulator-cell {
  background-color: rgba(0, 0, 0, 0.02) !important;
}
.tabulator .tabulator-row.tabulator-row-even .tabulator-cell {
  background-color: transparent !important;
}

/* Sort arrows */
.tabulator .tabulator-col.tabulator-sortable:hover {
  background: color-mix(in oklab, hsl(var(--b2)) 40%, transparent) !important;
}
.tabulator .tabulator-col .tabulator-arrow {
  border-bottom-color: color-mix(in oklab, hsl(var(--bc)) 55%, transparent) !important;
}

/* -------------------------------------------------------------------------- */
/* Detail drawer and misc                                                     */
/* -------------------------------------------------------------------------- */

.detail-kv{
  padding:10px 10px;
  border-radius:14px;
  background: color-mix(in oklab, hsl(var(--b1)) 88%, transparent);
  border:1px solid color-mix(in oklab, hsl(var(--bc)) 12%, transparent);
}
.detail-kv .k{ font-size:12px; opacity:.70; }
.detail-kv .v{ font-size:14px; font-weight:700; margin-top:2px; }

.btn:focus{ outline: none !important; }
.input:focus, input:focus{ box-shadow:none !important; }